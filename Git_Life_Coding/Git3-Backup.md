# Git3-Backup



### 백업 인트로

컴퓨터의 데이터는 언제든지 사라질 수 있다. 그래서 정보를 다른 컴퓨터로 이동시켜 고장나더라도 복구 시킬 수 있어야 한다. 

git은 버전정보를 .git 폴더에 저장한다. 이 폴더를 포함하여 모든 폴더를 드라이브에 포함하여 올린다면 백업을 완료하는 것이다. 

백업은 자유롭지만 어려운 방법과 제한적이지만 쉬운 방법이 있다. 직접 백업서버를 구축하여 백업을 올리거나 작업용 컴퓨터와 백업용 컴퓨터가 서로 교신할 수 있도록 조치를 취하고 보안 조치를 실행해야 한다.

이번에는 제한적이지만 쉬운 방법을 살펴볼 것이다. 인터넷에 연결된 컴퓨터 한 대 한 대를 호스트라고 부르는데 인터넷 서비스 중에는 호스팅 서비스를 제공하는 업체가 있는데 인터넷에 연결되어서 원격으로 사용할 수 있는 서버를 임대해 주는 사업이다. 

Git hosting 이란 우리가 로컬에서 저장하고 있는 버전을 업로드할 원격 저장소를 임대해주는 비즈니스를 말한다. 이 비즈니스를 사용하면 원격저장소를 운영할 수 있다.





### 용어 정리

로컬 저장소(local repository)와 원격 저장소(remote repository) 2가지가 존재한다. 우리가 현재 사용하는 컴퓨터는 로컬 저장소이고 버전을 생성한 뒤 '푸쉬'하게 되면 로컬 저장소에 있는 자료와 버전 관리 등등이 원격 저장소로 업로드 된다. 작업이 끝날 때마다 푸쉬를 하면 두가지의 저장소가 같은 상태를 가지게 된다.

이 백업이라면 당연히 복원을 할 수 있어야 한다. 컴퓨터가 여러가지 있을 경우 다른 컴퓨터에 원격 저장소의 레포지토리를 떠오는 것을 '클론'이라고 한다. 작업 한 뒤 다시 푸쉬를 하면 된다.

 만약 아직 다른 컴퓨터와 원격 저장소가 버전상태가 다를 경우 '풀'을 통해 원격 저장소와 로컬 저장소가 같은 상태를 유지할 수 있게 만든다.

원격 저장소를 제공해주는 서비스를 git hosting 이라고 한다.



### git hosting 선택

git 호스팅을 지원하는 서비스는 많이 존재한다. gitlab,  github, codebase, pikacode 등등 

우리는 가장 대표적인 github을 사용할 것이다.





### 저장소 생성

github에서 repositories의 new 버튼을 클릭한다.

repository의 이름을 정한 뒤 public(공개)/private(비공개) 를 설정할 수 있다. 그리고 create repo를 누르면 저장소가 생성된다.



### 전략

백업은 두가지의 방향이 존재한다. local->remote, remote->local

저장소들간의 버전을 주고받기 위해서는 통신을 해야한다. 통신의 기술적인 방법은 크게 2가지로 Http, SSH가 존재한다. 

우리는 http를 사용할 것이다. http를 통해서 local->remote, remote->local로 백업하는 방법을 배울 것이다.

http는 ssh보다 보안이 부족하지만 배울 필요가 없다. 그냥 쓸 수 있다. ssh는 보안이 훨씬 강력하고 훨씬 편리하다. 하지만 배워야 할 것이 꽤 많다.





### 원격저장소와 연결

원격저장소와 연결하는 명령어가 존재한다.두가지 주소가 존재

```powershell
git remote add 주소이름 주소url
```

위의 명령어 인데 이때 주소를 가져올 때 깃헙에서는 https와 ssh 두 개가 존재하는데 우리는 https를 사용한다. 

위의 명령이 지역저장소에 원격저장소의 url과 연결된다.



지역 저장소에 원격 저장소가 잘 들어가 있는 지 확인하는 명령어는 아래와 같다.

```powershell
git remote -v
```





### push

우리는 이제 작업한 내용을 원격저장소에 업로드 해야 한다. 가장 기초적인 명령어는 다음과 같다.

```powershell
git push
```



이때 fatal 오류가 발생하고 다음과 같은 명령어가 뜰 수도 있다.

```
git push --set-upstream origin master
```

이 명령어는 기본적으로 푸쉬를 실행할 때 어떤 원격저장소를 기본으로하고 어떤 브랜치를 업로드 하는지 결정한다.

origin이라는 주소로 master브랜치를 업로드 한다는 뜻이다. 

즉 푸쉬를 할 경우 위의 명령어를 통해 푸쉬가 될 경우 기본적으로 업로드할 원격저장소와 브랜치를 결정하는 것이다.

```powershell
git push --set-upstream 원격저장소별명 브랜치이름
```



이때 깃헙 사이트가 뜨게되고 원격저장소의 경우 인증을 요구한다. github의 경우 아이디와 비밀번호를 입력하면 된다.

인증이 끝나면 푸쉬가 진행되고 저장소의 내용을 확인할 수 있게 된다.





### Clone

여러대의 컴퓨터에 같은 파일의 상태를 유지하게 할 수 있다. 

저장소를 만드는(working area) 명령어는 크게 git clone과 git init이 존재한다. 

이 중 클론은 이미 있는 프로젝트를 복제하는 명령어이다.

```powershell
git clone 프로젝트url
```

현재 이 명령을 실행시킨 폴더에 프로젝트의 폴더를 생성하도록 할 수 있다.

```powershell
git clone 프로젝트url 폴더이름 : 폴더이름의 폴더를 만들어서 프로젝트 가져오기
```

명령어를 가져오면 원격저장소에 올라간 버전을 가져올 수 있다.





### pull

pull은 원격저장소의 내용을 가져와 로컬저장소의 내용을 최신 상태로 유지하는 것이다.

```powershell
git pull
```

Git pull은 origin의 주소로부터 master 브랜치를 가져와 최신의 상태로 업데이트 시켜준다.

그래서 작업할 때는 항상 pull하고 작업한 뒤 add, commit, push 하는 것이다.





### 오픈소스

git 프로그램은 오픈소스로 공개되어 많은 사람들이 관리하고 있다.

오늘날 오픈소스는 개발자들에게 아주 중요하다. 수많은 오픈소스가 깃허브나 깃랩을 통해 호스팅되고 있다.

git을 활용한다면 오픈소스를 다룰 수 있게 된다.





### 수업을 마치며

인증과 관련해서 원격저장소와 통신을 할 때마다 인증을 요구하는 걸 요구하는 경우가 있다. 이경우 SSH를 통해서 저장소간의 통신하는 방법을 살펴보자. SSH를 사용하면 자동로그인이 가능하다.

깃헙, 깃랩은 많은 기능을 제공하고 있다. 그 중 issue는 프로젝트를 하면서 발생하는 이슈를 모아서 볼 수 있다. todolist라고 생각할 수 있다. 프로젝트에서 발생하는 문제를 기록할 수 있고 처리할 문제를 체계적으로 관리할 수 있다. 

백업을 통해 원격저장소를 다룰 수 있게 되면 협업을 할 수 있다. 이 경우 버전관리 시스템을 관리하는 사람이 중요해진다.

협업을 버전관리 시스템을 이용하기 위해 필요한 것은 무엇이 있을 까 동시에 작업하며 발생할 수 있는 일들이 존재한다. 

이 경우 conflict가 발생할 수 있는 데 이를 핸들링할 수 있어야 한다.

